# R Markdown static Databricks app

Minimal Databricks app that serves a static HTML page generated by R Markdown.

## Prerequisites

- **R** (4.x) and **Pandoc** (`brew install pandoc` on macOS).
- **Databricks CLI** configured with your profile (`databricks configure --profile YOUR_PROFILE`).

No need to install `renv` manually. The repo includes `renv/activate.R`, which bootstraps renv automatically the first time R runs from this directory. To install all R dependencies from the lockfile:

```bash
Rscript -e "renv::restore()"
```

This is a one-time step (like `pip install -r requirements.txt`). After that, `Rscript render_report.R` will find all packages.

## The manual way

1. **Render the report** (generates `static/index.html`):

```bash
Rscript render_report.R
```

2. **Create the app** (one-off, first time only):

```bash
databricks apps create rmd-static -p YOUR_PROFILE
```

3. **Upload the project to Databricks:**

```bash
databricks workspace import-dir . /Workspace/Users/<your-email>/rmd-static -p YOUR_PROFILE
```

4. **(Re)deploy the app:**

```bash
databricks apps deploy rmd-static -p YOUR_PROFILE \
  --source-code-path /Workspace/Users/<your-email>/rmd-static
```

## The automated way

Set up a git repo and attach a CI/CD pipeline (e.g. GitHub Actions, Azure DevOps) that runs the four steps above on every push or on a schedule.
